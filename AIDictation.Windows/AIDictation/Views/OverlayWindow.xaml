<Window x:Class="AIDictation.Views.OverlayWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="AIDictation Overlay"
        Width="280" Height="64"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent"
        ResizeMode="NoResize"
        ShowInTaskbar="False"
        Topmost="True"
        Focusable="False">
    
    <Window.Resources>
        <!-- Colors -->
        <SolidColorBrush x:Key="BackgroundBrush" Color="#E6333333"/>
        <SolidColorBrush x:Key="AccentBrush" Color="#0078D4"/>
        <SolidColorBrush x:Key="RecordingBrush" Color="#FF4444"/>
        <SolidColorBrush x:Key="TextPrimaryBrush" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextSecondaryBrush" Color="#B0B0B0"/>
        
        <!-- Spinner Animation -->
        <Storyboard x:Key="SpinnerAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="SpinnerTransform"
                           Storyboard.TargetProperty="Angle"
                           From="0" To="360" Duration="0:0:1"/>
        </Storyboard>
        
        <!-- Recording Pulse Animation -->
        <Storyboard x:Key="RecordingPulseAnimation" RepeatBehavior="Forever">
            <DoubleAnimation Storyboard.TargetName="RecordingIndicator"
                           Storyboard.TargetProperty="Opacity"
                           From="1" To="0.4" Duration="0:0:0.6"
                           AutoReverse="True"/>
        </Storyboard>
        
        <!-- Fade In Animation -->
        <Storyboard x:Key="FadeInAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="0" To="1" Duration="0:0:0.15"/>
        </Storyboard>
        
        <!-- Fade Out Animation -->
        <Storyboard x:Key="FadeOutAnimation">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                           From="1" To="0" Duration="0:0:0.15"/>
        </Storyboard>
    </Window.Resources>
    
    <!-- Main container -->
    <Border CornerRadius="8" Background="{StaticResource BackgroundBrush}" Margin="8">
        <Border.Effect>
            <DropShadowEffect BlurRadius="12" ShadowDepth="2" Opacity="0.4" Color="Black"/>
        </Border.Effect>
        
        <Grid Margin="12,8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            
            <!-- Recording State -->
            <Grid x:Name="RecordingPanel" Grid.ColumnSpan="3" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- Recording indicator dot -->
                <Ellipse x:Name="RecordingIndicator"
                        Grid.Column="0"
                        Width="12" Height="12"
                        Fill="{StaticResource RecordingBrush}"
                        VerticalAlignment="Center"
                        Margin="0,0,10,0"/>
                
                <!-- Waveform visualization -->
                <Canvas x:Name="WaveformCanvas" 
                        Grid.Column="1"
                        Height="32"
                        VerticalAlignment="Center"
                        ClipToBounds="True"/>
                
                <!-- Duration -->
                <TextBlock x:Name="DurationText"
                          Grid.Column="2"
                          Text="0:00"
                          FontFamily="Segoe UI"
                          FontSize="13"
                          Foreground="{StaticResource TextSecondaryBrush}"
                          VerticalAlignment="Center"
                          Margin="10,0,0,0"/>
            </Grid>
            
            <!-- Processing State -->
            <Grid x:Name="ProcessingPanel" Grid.ColumnSpan="3" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <!-- Spinner -->
                <Viewbox Grid.Column="0" Width="24" Height="24" Margin="0,0,10,0">
                    <Canvas Width="24" Height="24">
                        <Ellipse Width="22" Height="22" 
                               Canvas.Left="1" Canvas.Top="1"
                               Stroke="{StaticResource AccentBrush}" 
                               StrokeThickness="2.5"
                               StrokeDashArray="3,2"
                               RenderTransformOrigin="0.5,0.5">
                            <Ellipse.RenderTransform>
                                <RotateTransform x:Name="SpinnerTransform" Angle="0"/>
                            </Ellipse.RenderTransform>
                        </Ellipse>
                    </Canvas>
                </Viewbox>
                
                <TextBlock Grid.Column="1"
                          Text="Transcribing..."
                          FontFamily="Segoe UI"
                          FontSize="13"
                          Foreground="{StaticResource TextSecondaryBrush}"
                          VerticalAlignment="Center"/>
            </Grid>
            
            <!-- Result State -->
            <Grid x:Name="ResultPanel" Grid.ColumnSpan="3" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                          Text="âœ“"
                          FontSize="16"
                          Foreground="#4CAF50"
                          VerticalAlignment="Center"
                          Margin="0,0,8,0"/>
                
                <TextBlock x:Name="ResultPreviewText"
                          Grid.Column="1"
                          Text=""
                          FontFamily="Segoe UI"
                          FontSize="13"
                          Foreground="{StaticResource TextPrimaryBrush}"
                          VerticalAlignment="Center"
                          TextTrimming="CharacterEllipsis"
                          MaxWidth="210"/>
            </Grid>
            
            <!-- Error State -->
            <Grid x:Name="ErrorPanel" Grid.ColumnSpan="3" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                          Text="âš ï¸"
                          FontSize="16"
                          VerticalAlignment="Center"
                          Margin="0,0,8,0"/>
                
                <TextBlock x:Name="ErrorText"
                          Grid.Column="1"
                          Text="Error"
                          FontFamily="Segoe UI"
                          FontSize="13"
                          Foreground="#FF6B6B"
                          VerticalAlignment="Center"
                          TextTrimming="CharacterEllipsis"/>
            </Grid>
            
            <!-- Idle State (hidden by default when HideIdleOverlay is enabled) -->
            <Grid x:Name="IdlePanel" Grid.ColumnSpan="3" Visibility="Collapsed">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>
                
                <TextBlock Grid.Column="0"
                          Text="ðŸŽ¤"
                          FontSize="16"
                          VerticalAlignment="Center"
                          Margin="0,0,8,0"/>
                
                <TextBlock Grid.Column="1"
                          Text="Ready"
                          FontFamily="Segoe UI"
                          FontSize="13"
                          Foreground="{StaticResource TextSecondaryBrush}"
                          VerticalAlignment="Center"/>
            </Grid>
        </Grid>
    </Border>
</Window>
